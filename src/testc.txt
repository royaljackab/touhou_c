#include "test.h"


ObjID bossID;
Object boss;
int timer=0;


int objCount=0;
float angleT=0;

void Initialize() {
    bossID = Obj_Create(OBJ_BOSS);

    //texture du boss
    Obj_SetTexture(bossID, BOSS_SPRITESHEET);
    ObjSprite2D_SetSourceRect(bossID, 16,187,512,84);
    ObjSprite2D_SetAnimation(bossID, 8, 5);
    ObjSprite2D_SetCollisionToShot(bossID, 20);


    ObjMove_SetPosition(bossID, -20, -20);
  
}

void MainLoop() {
    timer++;

    if(timer==20) {
        ObjMove_SetDestAtSpeed(bossID, 360, 200, 7);
    }

    if (timer%2==0 && timer > 120) {
        for (int i=0; i<13; i++) {
            CreateShot(objects[bossID].pos.x, objects[bossID].pos.y, 5, angleT, BALL_M_BLACK,5);
            angleT += 360/12;
        }
        angleT += sin(2 * objCount * DEG2RAD) * 12;
        objCount++;

        
    }
    if(timer>120) {
        objects[bossID].pos.x = cos(timer/50.0) * 100 + 360;
        objects[bossID].pos.y = sin(timer/50.0) * 50 + 200;
    }


}